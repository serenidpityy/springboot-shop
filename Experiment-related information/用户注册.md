# 用户注册

1.创建用户表



2.注册-持久层  通过MyBatis来操作数据库
2.1 sql语句
1.用户的注册功能

```
```

2.在用户注册时查询当前用户名是否存在，若存在则不能进行注册

`````
`````



2.2 设计接口和抽象方法
定义Mapper接口



3.注册-业务层

3.1 规划异常

1.RuntimeException异常，作为异常的子类，然后再去定义具体的异常类型来继承这个异常，

业务层异常的基类：ServiceException异常继承RuntimeException

2.用户名被占用的异常：UsernameDuplicatedException

3.站在执行数据插入的时候，服务器数据库宕机等的异常：InsertException



3.2 设计接口和抽象方法

1.在service包下创建UserService接口

2.创建实现类UserServiceImpl，实现接口和抽象方法



4.注册-控制层
4.1创建响应
状态码、状态描述信息、数据，封装到一个类中，将这类作为方法返回值，返回给前端浏览器

4.2设计请求

依据当前的业务功能模块
```
请求路径：/user/reg
请求参数：User user
请求类型：POST
响应结果：JsonResult<void>
```

4.3处理请求

1.创建一个控制层对应的类UserController类，依赖于业务层的接口

4.4控制层优化设计

在控制层抽离一个父类，在这个父类中统一去处理关于异常的相关操作，BaseController类



5.注册-前端页面

1.在register页面中编写发送请求的方法，点击事件来完成，选中对应的按钮(\$(“选择器”))，再去添加点击的事件，\$.ajax()函数发送异步请求（异步就是这个旧的页面不会变，只会加载新的布局，不会跳转到新的页面）
2.JQuery封装了函数：\$.ajax()函数,通过对象调用，异步加载请求（依靠的时Javascript提供的一个对象XHR，封装了这个对象）
3.`ajax()` 使用方式。需要传递一个方法体作为方法的参数来使用，一对大括号称之为方法体。`ajaxj` 接收多个参数，参数与参数之间要求使用 “,” 进行分割，每一组参数之间使用 “:” 进行分割，参数的组成部分一个是参数的名称（不能随意的定义），是参数的值，参数的值要求是用字符串来标识。参数的声明顺序没哟要求。语法结构：

`````
方法一
$.ajax(fun());

functioin fun(){
	//TODO
}

方法二
$.ajax({
url:"",
type:"",
data:"",
dataType:"",
success:function(){

},
error:function(){

}
})
`````





| 参数     | 功能描述                                                     |
| -------- | ------------------------------------------------------------ |
| url      | 标识请求的地址(url地址)，不能包含参数列表部分的内容。例如：url: "localhost:8080/users/reg" |
| type     | 请求类型（GET和POST请求的类型）。例如：type: "POST"          |
| data     | 向指定的请求url地址提交的数据。例如：data: "username=tom&pwd=123" |
| dataType | 提交的数据的类型。数据的类型一般指定为json类型。dataType: "json" |
| success  | 当服务器正常响应客户端时，会自动调用success参数的方法，并且将服务器返回的数据以参数的形式传递给这个方法的参数上 |
| error    | 当服务器未正常响应客户端时，会自动调用error参数的方法，并且将服务器返回的数据以参数的形式传递给这个方法的参数上 |

注意 ：js代码可以独立声明在一个js的文件里或声明在script标签中