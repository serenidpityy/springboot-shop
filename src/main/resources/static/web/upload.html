<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<!--edgeæµè§ˆå™¨H5å…¼å®¹è®¾ç½®-->
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<!--360æµè§ˆå™¨H5å…¼å®¹è®¾ç½®-->
		<meta name="renderer" content="webkit" />
		<title>ç”µè„‘å•†åŸ</title>
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<!--å¯¼å…¥æ ¸å¿ƒæ–‡ä»¶-->
		<script src="../bootstrap3/js/holder.js"></script>
		<link href="../bootstrap3/css/bootstrap.css" rel="stylesheet" type="text/css">
		<script src="../bootstrap3/jquery-1.9.1.min.js"></script>
		<script src="../bootstrap3/js/bootstrap.js"></script>
		<!-- å­—ä½“å›¾æ ‡ -->
		<link rel="stylesheet" href="../bootstrap3/font-awesome-4.7.0/css/font-awesome.css" />
		<link rel="stylesheet" type="text/css" href="../css/layout.css" />
		<link rel="stylesheet" type="text/css" href="../css/top.css" />
		<link rel="stylesheet" type="text/css" href="../css/footer.css" />
	</head>

	<body>
		<!--å¤´éƒ¨-->
		<header class="header">
			<!--ç”µè„‘å•†åŸlogo-->
			<div class="row">
				<div class="col-md-3">
					<a href="index.html">
						<img src="../images/index/stumalllogo.png" />
					</a>
				</div>
				<!--å¿«æ·é€‰é¡¹-->
				<div class="col-md-9 top-item">
					<ul class="list-inline pull-right">
						<li><a href="favorites.html"><span class="fa fa-heart"></span>&nbsp;æ”¶è—</a></li>
						<li class="li-split">|</li>
						<li><a href="orders.html"><span class="fa fa-file-text"></span>&nbsp;è®¢å•</a></li>
						<li class="li-split">|</li>
						<li><a href="cart.html"><span class="fa fa-cart-plus"></span>&nbsp;è´­ç‰©è½¦</a></li>
						<li class="li-split">|</li>
						<li>
							<!--ä¸‹åˆ—åˆ—è¡¨æŒ‰é’® ï¼šç®¡ç†-->
							<div class="btn-group">
								<button type="button" class="btn btn-link dropdown-toggle" data-toggle="dropdown">
									<span id="top-dropdown-btn"><span class="fa fa-gears"></span>&nbsp;ç®¡ç† <span class="caret"></span></span>
								</button>
								<ul class="dropdown-menu top-dropdown-ul" role="menu">
									<li><a href="password.html">ä¿®æ”¹å¯†ç </a></li>
									<li><a href="userdata.html">ä¸ªäººèµ„æ–™</a></li>
									<li><a href="upload.html">ä¼šå‘˜</a></li>
									<li><a href="address.html">æ”¶è´§ç®¡ç†	</a></li>
								</ul>
							</div>
						</li>
						<li class="li-split">|</li>
						<li><a href="login.html"><span class="fa fa-user"></span>&nbsp;ç™»å½•</a></li>
					</ul>
				</div>
			</div>
		</header>
		<!--å¯¼èˆª -->
		<!--åˆ†å‰²å¯¼èˆªå’Œé¡¶éƒ¨-->
		<div class="row top-nav">
			<div class="col-md-6">
				<ul class="nav nav-pills">
					<li>
						<a href="#"></a>
					</li>
					<li class="active"><a href="index.html"><span class="fa fa-home"></span></a></li>
					<li><a href="#">ç§’æ€</a></li>
					<li><a href="#">ä¼˜æƒ åˆ¸</a></li>
					<li><a href="#">ç”µè„‘VIP</a></li>
					<li><a href="#">å¤–å–</a></li>
					<li><a href="#">è¶…å¸‚</a></li>
				</ul>
			</div>
			<div class="col-md-6">
				<form action="search.html" class="form-inline pull-right" role="form">
					<div class="form-group">
						<input type="text" class="form-control" id="search" name="search" placeholder="è¯·è¾“å…¥å•†å“åç§°è¿›è¡Œæœç´¢">
					</div>
					<button type="submit" class="btn btn-default btn-sm"><span class="fa fa-search"></span></button>
				</form>
			</div>
		</div>
		<!--å¤´éƒ¨ç»“æŸ-->
		<!--å¯¼èˆªç»“æŸ-->
		<div class="container">
			<div class="col-md-2">
				<!--å·¦ä¾§å¯¼èˆªå¼€å§‹-->
				<div class="panel-group" id="accordion">
					<div class="panel panel-default">
						<div class="panel-heading">
							<!--ä¸»é€‰é¡¹ï¼šæˆ‘çš„è®¢å•-->
							<p class="panel-title">
								<a data-toggle="collapse" data-parent="#accordion" href="#collapseOne">æˆ‘çš„è®¢å•</a>
							</p>
						</div>
						<div id="collapseOne" class="panel-collapse collapse">
							<div class="panel-body">
								<div><a href="orders.html">å…¨éƒ¨è®¢å•</a></div>
								<div><a href="orders.html">å¾…ä»˜æ¬¾</a></div>
								<div><a href="orders.html">å¾…æ”¶è´§</a></div>
								<div><a href="orders.html">å¾…è¯„ä»·</a></div>
								<div><a href="orders.html">é€€è´§é€€æ¬¾</a></div>
							</div>
						</div>
					</div>
					<div class="panel panel-default">
						<div class="panel-heading">
							<!--ä¸»é€‰é¡¹ï¼šèµ„æ–™ä¿®æ”¹-->
							<p class="panel-title">
								<a data-toggle="collapse" data-parent="#accordion" href="#collapseTwo">èµ„æ–™ä¿®æ”¹</a>
							</p>
						</div>
						<div id="collapseTwo" class="panel-collapse collapse in">
							<div class="panel-body">
								<div><a href="password.html">ä¿®æ”¹å¯†ç </a></div>
								<div><a href="userdata.html">ä¸ªäººèµ„æ–™</a></div>
								<div><a href="upload.html"><b>ä¼šå‘˜</b></a></div>
								<div><a href="address.html">æ”¶è´§ç®¡ç†</a></div>
							</div>
						</div>
					</div>
				</div>
				<!--å·¦ä¾§å¯¼èˆªç»“æŸ-->
			</div>

<!--			ä¼šå‘˜-->
			<div class="col-md-10">
				<div class="panel panel-default">
					<ul class="nav nav-tabs">
						<li><a href="password.html">ä¿®æ”¹å¯†ç </a></li>
						<li><a href="userdata.html">ä¸ªäººèµ„æ–™</a></li>
						<li class="active"><a href="#">ä¼šå‘˜</a></li>
						<li><a href="address.html">æ”¶è´§ç®¡ç†</a></li>
					</ul>
					<div class="panel-body">
						<!-- ä¼šå‘˜çŠ¶æ€å®¹å™¨ -->
						<div id="memberContainer" class="text-center" style="padding: 30px;">
							<!-- å†…å®¹ç”±JavaScriptåŠ¨æ€åŠ è½½ -->
						</div>

						<script>
							// åˆå§‹åŒ–ä¼šå‘˜çŠ¶æ€
							$(document).ready(function() {
								loadMemberStatus();
							});

							// åŠ è½½ä¼šå‘˜çŠ¶æ€
							function loadMemberStatus() {
								$.ajax({
									url: "/user/getmember",
									type: "POST",
									dataType: "JSON",
									success: function(response) {
										if(response.state === 200) {
											updateMemberDisplay(response.data.member);
										} else {
											showError("çŠ¶æ€åŠ è½½å¤±è´¥ï¼š" + response.msg);
										}
									},
									error: function() {
										showError("ç½‘ç»œè¯·æ±‚å¤±è´¥ï¼Œè¯·ç¨åé‡è¯•");
									}
								});
							}

							// æ›´æ–°æ˜¾ç¤ºçŠ¶æ€
							function updateMemberDisplay(memberStatus) {
								const container = $("#memberContainer");

								if(memberStatus == 1) {
									container.html(`
                            <h3>ğŸ‰ å°Šè´µä¼šå‘˜</h3>
                            <p>æœ‰æ•ˆæœŸè‡³ï¼š2025å¹´12æœˆ31æ—¥</p>
                            <button onclick="cancelMembership()"
                                    class="btn btn-warning">
                                å–æ¶ˆä¼šå‘˜
                            </button>
                        `);
								} else {
									container.html(`
                            <h4>ç«‹å³åŠ å…¥ä¼šå‘˜äº«å—ç‰¹æƒ</h4>
                            <button onclick="joinMembership()"
                                    class="btn btn-danger btn-lg">
                                ç«‹å³åŠ å…¥ä¼šå‘˜
                            </button>
                        `);
								}
							}

							// åŠ å…¥ä¼šå‘˜
							function joinMembership() {
								$.ajax({
									url: "/user/bemember",
									type: "POST",
									dataType: "JSON",
									success: function(response) {
										if(response.state === 200) {  // ç»Ÿä¸€ä½¿ç”¨stateå­—æ®µ
											loadMemberStatus();  // é‡æ–°åŠ è½½æœ€æ–°çŠ¶æ€
											showSuccess("ä¼šå‘˜å¼€é€šæˆåŠŸï¼");
										} else {
											showError("å¼€é€šå¤±è´¥ï¼š" + response.msg);
										}
									},
									error: function() {
										showError("ç½‘ç»œè¯·æ±‚å¤±è´¥");
									}
								});
							}

							// å–æ¶ˆä¼šå‘˜
							function cancelMembership() {
								if(!confirm("ç¡®å®šè¦å–æ¶ˆä¼šå‘˜èµ„æ ¼å—ï¼Ÿ")) return;

								$.ajax({
									url: "/user/nobemember",
									type: "POST",
									dataType: "JSON",
									success: function(response) {
										if(response.state === 200) {  // ç»Ÿä¸€ä½¿ç”¨stateå­—æ®µ
											loadMemberStatus();  // é‡æ–°åŠ è½½æœ€æ–°çŠ¶æ€
											showSuccess("ä¼šå‘˜å·²å–æ¶ˆ");
										} else {
											showError("å–æ¶ˆå¤±è´¥ï¼š" + response.msg);
										}
									},
									error: function() {
										showError("ç½‘ç»œè¯·æ±‚å¤±è´¥");
									}
								});
							}

							// æ˜¾ç¤ºæˆåŠŸæç¤ºï¼ˆä¼˜åŒ–åçš„æç¤ºæ–¹æ³•ï¼‰
							function showSuccess(msg) {
								$("#memberContainer").prepend(`
                        <div class="alert alert-success alert-dismissible" style="margin-bottom:20px">
                            <button type="button" class="close" data-dismiss="alert">&times;</button>
                            ${msg}
                        </div>
                    `);
								// 3ç§’åè‡ªåŠ¨æ¶ˆå¤±
								setTimeout(() => {
									$(".alert-success").alert('close');
								}, 3000);
							}

							// æ˜¾ç¤ºé”™è¯¯æç¤ºï¼ˆä¼˜åŒ–åçš„æç¤ºæ–¹æ³•ï¼‰
							function showError(msg) {
								$("#memberContainer").prepend(`
                        <div class="alert alert-danger alert-dismissible" style="margin-bottom:20px">
                            <button type="button" class="close" data-dismiss="alert">&times;</button>
                            ${msg}
                        </div>
                    `);
								// 5ç§’åè‡ªåŠ¨æ¶ˆå¤±
								setTimeout(() => {
									$(".alert-danger").alert('close');
								}, 5000);
							}
						</script>
					</div>
				</div>
			</div>
		</div>


		<!--é¡µè„šå¼€å§‹-->
		<div class="clearfix"></div>
		<footer class="footer">
			<!-- å“è´¨ä¿éšœï¼Œç§äººå®šåˆ¶ç­‰-->
			<div class="text-center rights container">
				<div class="col-md-offset-2 col-md-2">
					<span class="fa fa-thumbs-o-up"></span>
					<p>å“è´¨ä¿éšœ</p>
				</div>
				<div class="col-md-2">
					<span class="fa fa-address-card-o"></span>
					<p>ç§äººè®¢åˆ¶</p>
				</div>
				<div class="col-md-2">
					<span class="fa fa-graduation-cap"></span>
					<p>å­¦ç”Ÿç‰¹ä¾›</p>
				</div>
				<div class="col-md-2">
					<span class="fa fa-bitcoin"></span>
					<p>ä¸“å±ç‰¹æƒ</p>
				</div>
			</div>
			<!--è”ç³»æˆ‘ä»¬ã€ä¸‹è½½å®¢æˆ·ç«¯ç­‰-->
			<div class="container beforeBottom">
				<div class="col-md-offset-1 col-md-3">
					<div><img src="../images/index/stumalllogo.png" alt="" class="footLogo" /></div>
					<div><img src="../images/index/footerFont.png" alt="" /></div>
				</div>
				<div class="col-md-4 callus text-center">
					<div class="col-md-4">
						<ul>
							<li>
								<a href="#">
									<p>ä¹°å®¶å¸®åŠ©</p>
								</a>
							</li>
							<li><a href="#">æ–°æ‰‹æŒ‡å—</a></li>
							<li><a href="#">æœåŠ¡ä¿éšœ</a></li>
							<li><a href="#">å¸¸è§é—®é¢˜</a></li>
						</ul>
					</div>
					<div class="col-md-4">
						<ul>
							<li>
								<a href="#">
									<p>å•†å®¶å¸®åŠ©</p>
								</a>
							</li>
							<li><a href="#">å•†å®¶å…¥é©»</a></li>
							<li><a href="#">å•†å®¶åå°</a></li>
						</ul>
					</div>
					<div class="col-md-4">
						<ul>
							<li>
								<a href="#">
									<p>å…³äºæˆ‘ä»¬</p>
								</a>
							</li>
							<li><a href="#">å…³äºåœ†å¿ƒ</a></li>
							<li><a href="#">è”ç³»æˆ‘ä»¬</a></li>
							<li>
								<span class="fa fa-wechat"></span>
								<span class="fa fa-weibo"></span>
							</li>
						</ul>
					</div>
				</div>
				<div class="col-md-4">
					<div class="col-md-5">
						<p>ç”µè„‘å•†åŸå®¢æˆ·ç«¯</p>
						<img src="../images/index/ios.png" class="lf">
						<img src="../images/index/android.png" alt="" class="lf" />
					</div>
					<div class="col-md-6">
						<img src="../images/index/erweima.png">
					</div>
				</div>
			</div>
			<!-- é¡µé¢åº•éƒ¨-å¤‡æ¡ˆå· #footer -->
			<div class="col-md-12 text-center bottom">
				Copyright Â© 2022 dnsc.cn All Rights Reserved äº¬ICPå¤‡08963888å·-45 <a target="_blank" href="http://www.dnsc.cn/">åœ†å¿ƒç§‘æŠ€é›†å›¢æœ‰é™å…¬å¸</a> ç‰ˆæƒæ‰€æœ‰
			</div>
		</footer>
		<!--é¡µè„šç»“æŸ-->
	</body>

</html>